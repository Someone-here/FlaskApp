<!DOCTYPE html>
<html lang="en">
<head>
    <link rel = "icon" href = "{{ url_for('static', filename='logo.png') }}">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/picture.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Photography</title>
    <style>
        .landscape {
            flex: 75%;
            {% if images['potrait'] == "true" %}
            padding: 0px 5rem;
            {% else %}
            padding: 0px 1rem;
            {% endif %}
        }
    </style>
</head>
<body>
    {% with color="#EDECEC" %}
    {% include "header.jinja" %}
    {% endwith %}
    <div class="flexContainer">
        <div class="landscape">
            <img src="{{ url_for('static', filename=images['path']) }}" alt="main_image" width="100%" height="92.5%">
        </div>
        <div class="text">
            <h1>{{name}}</h1>
            <h5><strong>STANDARD EDITION</strong></h5>
            <h2>{{symbol}} {{(images['cm100'] * currency)|round(2, "ceil")}}</h2>
            <select class = "sel">
            <option>Size: 100cm</option>
            <option>Size: 150cm</option>
            <option>Size: 200cm</option>
            </select>
            <h3 class="sel">Frame: Acrylic Mount</h3>
            <a class="ADD" href="/customer"><strong>BUY NOW </strong><span class="arrow">&rarr;</span></a>
            <div class="description">
                {{ images["description"] }}
            </div>
        </div>
    </div>
    {% include "footer.jinja" %}
    <script>
      const opt = document.querySelector(".sel");
      const price = document.querySelector(".text h2");
      var output = "{{(images['cm100'] * currency)|round(2, 'ceil')}}";
      opt.addEventListener("change", () => {
          if (opt.value == "Size: 100cm") {
              output = "{{(images['cm100'] * currency)|round(2, 'ceil')}}";
          }
          else if (opt.value == "Size: 150cm") {
              output = "{{(images['cm150'] * currency)|round(2, 'ceil')}}";
          }
          else {
              output = "{{(images['cm200'] * currency)|round(2, 'ceil')}}";
          }
          price.innerHTML = "{{symbol}}" + " " + output
        });
        const buy = document.querySelector(".ADD");
        buy.addEventListener("click", () => {
          $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "/info",
            data: JSON.stringify({"name": "{{name}}", "price": output}),
            dataType: "json"
          });
        });
    </script>
</body>
</html>